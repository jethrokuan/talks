<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Boot: A Whirlwind Tour</title>
<meta name="author" content="(Jethro Kuan)"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="../reveal.js/css/reveal.css"/>

<link rel="stylesheet" href="../reveal.js/css/theme/metropolis.css" id="theme"/>


<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = '../reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h1 class="title">Boot: A Whirlwind Tour</h1><h2 class="author">Jethro Kuan</h2><p class="date">Created: 2016-10-06 Thu 15:18</p>
</section>

<section>
<section id="slide-orgheadline3">
<h2 id="orgheadline3">About Me</h2>
<ul>
<li class="fragment appear">~ 6 months of Clojure experience</li>
<li class="fragment appear">Intern at Tinkertanker</li>
<li class="fragment appear">Use Clojure to develop Slack integrations</li>
<li class="fragment appear">Slides can be found at <a href="http://tk.sg/boot">http://tk.sg/boot</a></li>

</ul>
</section>
<section id="slide-orgheadline1">
<h3 id="orgheadline1">Disclaimer</h3>
</section>
<section id="slide-orgheadline2">
<h3 id="orgheadline2">Some Context&#x2026;</h3>
<aside class="notes">
<ul>
<li>First app I was commissioned to make was a todo app within Slack.
<ul>
<li>Settled on first libraries I came across: Compojure/Ring/Jetty</li>

</ul></li>
<li>Picked Boot initially (2.4)</li>
<li>Boot was too hard for me because I didn't really understand the JVM back then.</li>
<li>Decided to just download lein and run `lein new compojure todo`</li>

</ul>

</aside>
</section>
</section>
<section>
<section id="slide-orgheadline5">
<h2 id="orgheadline5">Lein</h2>
<div class="org-src-container">

<pre  class="src src-clojure">(<span style="color: #00B3EF;">defproject</span> <span style="color: #46D9FF;">org.example/sample</span> <span style="color: #7bc275;">"1.0.0-SNAPSHOT"</span> <span style="color: #525252;">; version "1.0.0-SNAPSHOT"</span>
  <span style="color: #9C91E4;">:description</span> <span style="color: #7bc275;">"A sample project"</span>
  <span style="color: #9C91E4;">:url</span> <span style="color: #7bc275;">"http://example.org/sample-clojure-project"</span>
  <span style="color: #9C91E4;">:license</span> {<span style="color: #9C91E4;">:name</span> <span style="color: #7bc275;">"Eclipse Public License - v 1.0"</span>
            <span style="color: #9C91E4;">:url</span> <span style="color: #7bc275;">"http://www.eclipse.org/legal/epl-v10.html"</span>
            <span style="color: #9C91E4;">:distribution</span> <span style="color: #9C91E4;">:repo</span>
            <span style="color: #9C91E4;">:comments</span> <span style="color: #7bc275;">"same as Clojure"</span>}
  <span style="color: #9C91E4;">:min-lein-version</span> <span style="color: #7bc275;">"2.0.0"</span>
  <span style="color: #9C91E4;">:dependencies</span> [[<span style="color: #ECBE7B;">org.clojure</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>clojure <span style="color: #7bc275;">"1.3.0"</span>]
                 [<span style="color: #ECBE7B;">org.jclouds</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>jclouds <span style="color: #7bc275;">"1.0"</span> <span style="color: #9C91E4;">:classifier</span> <span style="color: #7bc275;">"jdk15"</span>]
                 [<span style="color: #ECBE7B;">net.sf.ehcache</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>ehcache <span style="color: #7bc275;">"2.3.1"</span> <span style="color: #9C91E4;">:extension</span> <span style="color: #7bc275;">"pom"</span>]
                 [log4j <span style="color: #7bc275;">"1.2.15"</span> <span style="color: #9C91E4;">:exclusions</span> [[<span style="color: #ECBE7B;">javax.mail</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>mail <span style="color: #9C91E4;">:extension</span> <span style="color: #7bc275;">"jar"</span>]
                                              [<span style="color: #ECBE7B;">javax.jms</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>jms <span style="color: #9C91E4;">:classifier</span> <span style="color: #7bc275;">"*"</span>]
                                              <span style="color: #ECBE7B;">com.sun.jdmk</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>jmxtools
                                              <span style="color: #ECBE7B;">com.sun.jmx</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>jmxri]]
                 [<span style="color: #ECBE7B;">org.lwjgl.lwjgl</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>lwjgl <span style="color: #7bc275;">"2.8.5"</span>]
                 [<span style="color: #ECBE7B;">org.lwjgl.lwjgl</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>lwjgl-platform <span style="color: #7bc275;">"2.8.5"</span>
                  <span style="color: #9C91E4;">:classifier</span> <span style="color: #7bc275;">"natives-osx"</span>
                  <span style="color: #9C91E4;">:native-prefix</span> <span style="color: #7bc275;">""</span>]]
  <span style="color: #9C91E4;">:pedantic?</span> <span style="color: #9C91E4;">:abort</span>
  <span style="color: #9C91E4;">:exclusions</span> [<span style="color: #ECBE7B;">org.apache.poi</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>poi
               <span style="color: #ECBE7B;">org.apache.poi</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>poi-ooxml]
  <span style="color: #9C91E4;">:plugins</span> [[lein-pprint <span style="color: #7bc275;">"1.1.1"</span>]
            [lein-assoc <span style="color: #7bc275;">"0.1.0"</span>]
            [s3-wagon-private <span style="color: #7bc275;">"1.1.1"</span>]
            [lein-foo <span style="color: #7bc275;">"0.0.1"</span> <span style="color: #9C91E4;">:hooks</span> <span style="color: #9C91E4;">false</span>]
            [lein-bar <span style="color: #7bc275;">"0.0.1"</span> <span style="color: #9C91E4;">:middleware</span> <span style="color: #9C91E4;">false</span>]]
  <span style="color: #9C91E4;">:repositories</span> [[<span style="color: #7bc275;">"java.net"</span> <span style="color: #7bc275;">"http://download.java.net/maven/2"</span>]
                 [<span style="color: #7bc275;">"sonatype"</span> {<span style="color: #9C91E4;">:url</span> <span style="color: #7bc275;">"http://oss.sonatype.org/content/repositories</span><span style="color: #DC79DC; background-color: #000000;">/releases"</span><span style="color: #DC79DC; background-color: #000000;">                         </span>
                              <span style="color: #9C91E4;">:snapshots</span> <span style="color: #9C91E4;">false</span>
                              <span style="color: #9C91E4;">:sign-releases</span> <span style="color: #9C91E4;">false</span>
                              <span style="color: #9C91E4;">:checksum</span> <span style="color: #9C91E4;">:fail</span>
                              <span style="color: #9C91E4;">:update</span> <span style="color: #9C91E4;">:always</span>
                              <span style="color: #9C91E4;">:releases</span> {<span style="color: #9C91E4;">:checksum</span> <span style="color: #9C91E4;">:fail</span> <span style="color: #9C91E4;">:update</span> <span style="color: #9C91E4;">:always</span>}}]
                 [<span style="color: #7bc275;">"snapshots"</span> <span style="color: #7bc275;">"http://blueant.com/archiva/snapshots"</span>]
                 [<span style="color: #7bc275;">"releases"</span> {<span style="color: #9C91E4;">:url</span> <span style="color: #7bc275;">"http://blueant.com/archiva/internal"</span>
                              <span style="color: #9C91E4;">:username</span> <span style="color: #7bc275;">"milgrim"</span> <span style="color: #9C91E4;">:password</span> <span style="color: #9C91E4;">:env</span>}]]
  <span style="color: #9C91E4;">:mirrors</span> {<span style="color: #7bc275;">"central"</span> {<span style="color: #9C91E4;">:name</span> <span style="color: #7bc275;">"central"</span>
                       <span style="color: #9C91E4;">:url</span> <span style="color: #7bc275;">"http://mirrors.ibiblio.org/pub/mirrors/maven2"</span>}
            #<span style="color: #7bc275;">"clojars"</span> {<span style="color: #9C91E4;">:name</span> <span style="color: #7bc275;">"Internal nexus"</span>
                        <span style="color: #9C91E4;">:url</span> <span style="color: #7bc275;">"http://mvn.local/nexus/releases"</span>
                        <span style="color: #9C91E4;">:repo-manager</span> <span style="color: #9C91E4;">true</span>}}
  <span style="color: #9C91E4;">:local-repo</span> <span style="color: #7bc275;">"local-m2"</span>
  <span style="color: #9C91E4;">:update</span> <span style="color: #9C91E4;">:always</span>
  <span style="color: #9C91E4;">:checksum</span> <span style="color: #9C91E4;">:fail</span>
  <span style="color: #9C91E4;">:offline?</span> <span style="color: #9C91E4;">true</span>
  <span style="color: #9C91E4;">:deploy-repositories</span> [[<span style="color: #7bc275;">"releases"</span> {<span style="color: #9C91E4;">:url</span> <span style="color: #7bc275;">"http://blueant.com/archiva/internal/r</span><span style="color: #DC79DC; background-color: #000000;">eleases"</span>
                                     <span style="color: #9C91E4;">:signing</span> {<span style="color: #9C91E4;">:gpg-key</span> <span style="color: #7bc275;">"0xAB123456"</span>}}]
                        [<span style="color: #7bc275;">"snapshots"</span> <span style="color: #7bc275;">"http://blueant.com/archiva/internal/snapsh</span><span style="color: #DC79DC; background-color: #000000;">ots"</span><span style="color: #DC79DC; background-color: #000000;">]]</span>
  <span style="color: #9C91E4;">:signing</span> {<span style="color: #9C91E4;">:gpg-key</span> <span style="color: #7bc275;">"root@eruditorum.org"</span>}
  <span style="color: #9C91E4;">:certificates</span> [<span style="color: #7bc275;">"blueant.pem"</span>]
  <span style="color: #9C91E4;">:profiles</span> {<span style="color: #9C91E4;">:debug</span> {<span style="color: #9C91E4;">:debug</span> <span style="color: #9C91E4;">true</span>
                     <span style="color: #9C91E4;">:injections</span> [(prn (into {} (<span style="color: #ECBE7B;">System</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span><span style="color: #DC79DC; font-weight: bold;">getProperties</span>)))]}
             <span style="color: #9C91E4;">:1.4</span> {<span style="color: #9C91E4;">:dependencies</span> [[<span style="color: #ECBE7B;">org.clojure</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>clojure <span style="color: #7bc275;">"1.4.0"</span>]]}
             <span style="color: #9C91E4;">:1.5</span> {<span style="color: #9C91E4;">:dependencies</span> [[<span style="color: #ECBE7B;">org.clojure</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>clojure <span style="color: #7bc275;">"1.5.0"</span>]]}
             <span style="color: #9C91E4;">:dev</span> {<span style="color: #9C91E4;">:resource-paths</span> [<span style="color: #7bc275;">"dummy-data"</span>]
                   <span style="color: #9C91E4;">:dependencies</span> [[clj-stacktrace <span style="color: #7bc275;">"0.2.4"</span>]]}
             <span style="color: #9C91E4;">:uberjar</span> {<span style="color: #9C91E4;">:aot</span> <span style="color: #9C91E4;">:all</span>}
             <span style="color: #9C91E4;">:repl</span> {<span style="color: #9C91E4;">:plugins</span> [[<span style="color: #ECBE7B;">cider</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>cider-nrepl <span style="color: #7bc275;">"0.7.1"</span>]]}}
  <span style="color: #9C91E4;">:hooks</span> [<span style="color: #ECBE7B;">leiningen.hooks.difftest</span>]
  <span style="color: #9C91E4;">:middleware</span> [<span style="color: #ECBE7B;">lein-xml.plugin</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>middleware]
  <span style="color: #9C91E4;">:implicit-middleware</span> <span style="color: #9C91E4;">false</span>
  <span style="color: #9C91E4;">:implicit-hooks</span> <span style="color: #9C91E4;">false</span>

  <span style="color: #9C91E4;">:main</span> <span style="color: #ECBE7B;">my.service.runner</span>
  <span style="color: #9C91E4;">:aliases</span> {<span style="color: #7bc275;">"launch"</span> [<span style="color: #7bc275;">"run"</span> <span style="color: #7bc275;">"-m"</span> <span style="color: #7bc275;">"myproject.main"</span>]
            <span style="color: #7bc275;">"launch-version"</span> [<span style="color: #7bc275;">"run"</span> <span style="color: #7bc275;">"-m"</span> <span style="color: #7bc275;">"myproject.main"</span> <span style="color: #9C91E4;">:</span><span style="color: #ECBE7B;">project</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span><span style="color: #9C91E4;">version</span>]
            <span style="color: #7bc275;">"dumbrepl"</span> [<span style="color: #7bc275;">"trampoline"</span> <span style="color: #7bc275;">"run"</span> <span style="color: #7bc275;">"-m"</span> <span style="color: #7bc275;">"clojure.main/main"</span>]
            <span style="color: #7bc275;">"go"</span> ^<span style="color: #9C91E4;">:pass-through-help</span> [<span style="color: #7bc275;">"run"</span> <span style="color: #7bc275;">"-m"</span>]
            <span style="color: #7bc275;">"deploy!"</span> ^{<span style="color: #9C91E4;">:doc</span> <span style="color: #7bc275;">"Recompile sources, then deploy if tests succeed."</span>}
            [<span style="color: #7bc275;">"do"</span> <span style="color: #7bc275;">"clean"</span> [<span style="color: #7bc275;">"test"</span> <span style="color: #7bc275;">"</span><span style="color: #7bc275;">:integration</span><span style="color: #7bc275;">"</span>] [<span style="color: #7bc275;">"deploy"</span> <span style="color: #7bc275;">"clojars"</span>]]}
  <span style="color: #9C91E4;">:release-tasks</span> [[<span style="color: #7bc275;">"vcs"</span> <span style="color: #7bc275;">"assert-committed"</span>]
                  [<span style="color: #7bc275;">"change"</span> <span style="color: #7bc275;">"version"</span>
                   <span style="color: #7bc275;">"leiningen.release/bump-version"</span> <span style="color: #7bc275;">"release"</span>]
                  [<span style="color: #7bc275;">"vcs"</span> <span style="color: #7bc275;">"commit"</span>]
                  [<span style="color: #7bc275;">"vcs"</span> <span style="color: #7bc275;">"tag"</span>]
                  [<span style="color: #7bc275;">"deploy"</span>]]
  <span style="color: #9C91E4;">:prep-tasks</span> [[<span style="color: #7bc275;">"protobuf"</span> <span style="color: #7bc275;">"compile"</span>] <span style="color: #7bc275;">"javac"</span> <span style="color: #7bc275;">"compile"</span>]
  <span style="color: #9C91E4;">:aot</span> [<span style="color: #ECBE7B;">org.example.sample</span>]
  <span style="color: #9C91E4;">:injections</span> [(require '<span style="color: #ECBE7B;">clojure.pprint</span>)]
  <span style="color: #9C91E4;">:java-agents</span> [[nodisassemble <span style="color: #7bc275;">"0.1.1"</span> <span style="color: #9C91E4;">:options</span> <span style="color: #7bc275;">"extra"</span>]]
  <span style="color: #9C91E4;">:javac-options</span> [<span style="color: #7bc275;">"-target"</span> <span style="color: #7bc275;">"1.6"</span> <span style="color: #7bc275;">"-source"</span> <span style="color: #7bc275;">"1.6"</span> <span style="color: #7bc275;">"-Xlint:-options"</span>]
  <span style="color: #9C91E4;">:warn-on-reflection</span> <span style="color: #9C91E4;">true</span>
  <span style="color: #9C91E4;">:global-vars</span> {<span style="color: #DC79DC;">*warn-on-reflection*</span> <span style="color: #9C91E4;">true</span>
                <span style="color: #DC79DC;">*assert*</span> <span style="color: #9C91E4;">false</span>}
  <span style="color: #9C91E4;">:java-cmd</span> <span style="color: #7bc275;">"/home/phil/bin/java1.7"</span>
  <span style="color: #9C91E4;">:jvm-opts</span> [<span style="color: #7bc275;">"-Xmx1g"</span>]
  <span style="color: #9C91E4;">:eval-in</span> <span style="color: #9C91E4;">:leiningen</span>
  <span style="color: #9C91E4;">:bootclasspath</span> <span style="color: #9C91E4;">true</span>
  <span style="color: #9C91E4;">:source-paths</span> [<span style="color: #7bc275;">"src"</span> <span style="color: #7bc275;">"src/main/clojure"</span>]
  <span style="color: #9C91E4;">:java-source-paths</span> [<span style="color: #7bc275;">"src/main/java"</span>]  <span style="color: #525252;">; Java source is stored separately.</span>
  <span style="color: #9C91E4;">:test-paths</span> [<span style="color: #7bc275;">"test"</span> <span style="color: #7bc275;">"src/test/clojure"</span>]
  <span style="color: #9C91E4;">:resource-paths</span> [<span style="color: #7bc275;">"src/main/resource"</span>] <span style="color: #525252;">; Non-code files included in classpath/j</span><span style="color: #DC79DC; background-color: #000000;">ar.</span>
  <span style="color: #9C91E4;">:target-path</span> <span style="color: #7bc275;">"target/%s/"</span>
  <span style="color: #9C91E4;">:compile-path</span> <span style="color: #7bc275;">"%s/classy-files"</span>
  <span style="color: #9C91E4;">:native-path</span> <span style="color: #7bc275;">"%s/bits-n-stuff"</span>
  <span style="color: #9C91E4;">:clean-targets</span> [<span style="color: #9C91E4;">:target-path</span> <span style="color: #9C91E4;">:compile-path</span> <span style="color: #9C91E4;">:foobar-paths</span>
                  [<span style="color: #9C91E4;">:baz-config</span> <span style="color: #9C91E4;">:qux-path</span>] <span style="color: #7bc275;">"out"</span>]
  <span style="color: #9C91E4;">:clean-non-project-classes</span> <span style="color: #9C91E4;">true</span>
  <span style="color: #9C91E4;">:checkout-deps-shares</span> [<span style="color: #9C91E4;">:source-paths</span> <span style="color: #9C91E4;">:test-paths</span>
                         ~(<span style="color: #00B3EF;">fn</span> [p] (str (<span style="color: #9C91E4;">:root</span> p) <span style="color: #7bc275;">"/lib/dev/*"</span>))]
  <span style="color: #9C91E4;">:test-selectors</span> {<span style="color: #9C91E4;">:default</span> (<span style="color: #00B3EF;">fn</span> [m] (not (<span style="color: #00B3EF;">or</span> (<span style="color: #9C91E4;">:integration</span> m) (<span style="color: #9C91E4;">:regression</span> m))))
                   <span style="color: #9C91E4;">:integration</span> <span style="color: #9C91E4;">:integration</span>
                   <span style="color: #9C91E4;">:regression</span> <span style="color: #9C91E4;">:regression</span>}
  <span style="color: #9C91E4;">:monkeypatch-clojure-test</span> <span style="color: #9C91E4;">false</span>
  <span style="color: #9C91E4;">:repl-options</span> { <span style="color: #525252;">;; </span><span style="color: #525252;">Specify the string to print when prompting for input.</span>
                 <span style="color: #525252;">;; </span><span style="color: #525252;">defaults to something like (fn [ns] (str *ns* "=&gt; "))</span>
                 <span style="color: #9C91E4;">:prompt</span> (<span style="color: #00B3EF;">fn</span> [ns] (str <span style="color: #7bc275;">"your command for &lt;"</span> ns <span style="color: #7bc275;">"&gt;, master? "</span> ))
                 <span style="color: #525252;">;; </span><span style="color: #525252;">What to print when the repl session starts.</span>
                 <span style="color: #9C91E4;">:welcome</span> (println <span style="color: #7bc275;">"Welcome to the magical world of the repl!"</span>)
                 <span style="color: #9C91E4;">:init-ns</span> <span style="color: #ECBE7B;">foo.bar</span>
                 <span style="color: #9C91E4;">:init</span> (println <span style="color: #7bc275;">"here we are in"</span> <span style="color: #DC79DC;">*ns*</span>)
                 <span style="color: #9C91E4;">:caught</span> <span style="color: #ECBE7B;">clj-stacktrace.repl</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>pst+
                 <span style="color: #9C91E4;">:skip-default-init</span> <span style="color: #9C91E4;">false</span>
                 <span style="color: #9C91E4;">:host</span> <span style="color: #7bc275;">"0.0.0.0"</span>
                 <span style="color: #9C91E4;">:port</span> 4001
                 <span style="color: #9C91E4;">:timeout</span> 40000
                 <span style="color: #9C91E4;">:nrepl-handler</span> (<span style="color: #ECBE7B;">clojure.tools.nrepl.server</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span><span style="color: #00B3EF;">default-handler</span>)
                 <span style="color: #9C91E4;">:nrepl-middleware</span> [<span style="color: #ECBE7B;">my.nrepl.thing</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>wrap-amazingness
                                    (<span style="color: #00B3EF;">fn</span> [handler]
                                      (<span style="color: #00B3EF;">fn</span> [&amp; args]
                                        (prn <span style="color: #9C91E4;">:middle</span> args)
                                        (apply handler args)))]}
  <span style="color: #9C91E4;">:jar-name</span> <span style="color: #7bc275;">"sample.jar"</span>
  <span style="color: #9C91E4;">:uberjar-name</span> <span style="color: #7bc275;">"sample-standalone.jar"</span>
  <span style="color: #9C91E4;">:omit-source</span> <span style="color: #9C91E4;">true</span>
  <span style="color: #9C91E4;">:jar-exclusions</span> [#<span style="color: #7bc275;">"</span><span style="color: #DC79DC; font-weight: bold;">(?:</span><span style="color: #7bc275;">^</span><span style="color: #DC79DC; font-weight: bold;">|</span><span style="color: #7bc275;">/</span><span style="color: #DC79DC; font-weight: bold;">)</span><span style="color: #7bc275;">.svn/"</span>]
  <span style="color: #9C91E4;">:uberjar-exclusions</span> [#<span style="color: #7bc275;">"META-INF/DUMMY.SF"</span>]
  <span style="color: #9C91E4;">:auto-clean</span> <span style="color: #9C91E4;">false</span>
  <span style="color: #9C91E4;">:uberjar-merge-with</span> {#<span style="color: #7bc275;">"</span><span style="color: #7bc275; font-weight: bold;">\.</span><span style="color: #7bc275;">properties$"</span> [slurp str spit]}
  <span style="color: #9C91E4;">:filespecs</span> [{<span style="color: #9C91E4;">:type</span> <span style="color: #9C91E4;">:path</span> <span style="color: #9C91E4;">:path</span> <span style="color: #7bc275;">"config/base.clj"</span>}
              {<span style="color: #9C91E4;">:type</span> <span style="color: #9C91E4;">:paths</span> <span style="color: #9C91E4;">:paths</span> [<span style="color: #7bc275;">"config/web"</span> <span style="color: #7bc275;">"config/cli"</span>]}
              {<span style="color: #9C91E4;">:type</span> <span style="color: #9C91E4;">:bytes</span> <span style="color: #9C91E4;">:path</span> <span style="color: #7bc275;">"project.clj"</span>
               <span style="color: #9C91E4;">:bytes</span> ~(slurp <span style="color: #7bc275;">"project.clj"</span>)}
              {<span style="color: #9C91E4;">:type</span> <span style="color: #9C91E4;">:fn</span> <span style="color: #9C91E4;">:fn</span> (<span style="color: #00B3EF;">fn</span> [p]
                               {<span style="color: #9C91E4;">:type</span> <span style="color: #9C91E4;">:bytes</span> <span style="color: #9C91E4;">:path</span> <span style="color: #7bc275;">"git-log"</span>
                                <span style="color: #9C91E4;">:bytes</span> (<span style="color: #9C91E4;">:out</span> (<span style="color: #ECBE7B;">clojure.java.shell</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>sh
                                              <span style="color: #7bc275;">"git"</span> <span style="color: #7bc275;">"log"</span> <span style="color: #7bc275;">"-n"</span> <span style="color: #7bc275;">"1"</span>))})}]
  <span style="color: #9C91E4;">:manifest</span> {<span style="color: #7bc275;">"Project-awesome-level"</span> <span style="color: #7bc275;">"super-great"</span>
             <span style="color: #7bc275;">"Class-Path"</span> ~#(<span style="color: #ECBE7B;">clojure.string</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>join
                             <span style="color: #7bc275;">\space</span>
                             (<span style="color: #ECBE7B;">leiningen.core.classpath</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>get-classpath <span style="color: #66ffff;">%</span>))
             <span style="color: #9C91E4;">:my-section-1</span> [[<span style="color: #7bc275;">"MyKey1"</span> <span style="color: #7bc275;">"MyValue1"</span>] [<span style="color: #7bc275;">"MyKey2"</span> <span style="color: #7bc275;">"MyValue2"</span>]]
             <span style="color: #9C91E4;">:my-section-2</span> {<span style="color: #7bc275;">"MyKey3"</span> <span style="color: #7bc275;">"MyValue3"</span> <span style="color: #7bc275;">"MyKey4"</span> <span style="color: #7bc275;">"MyValue4"</span>}
             <span style="color: #7bc275;">"Grunge-level"</span> <span style="color: #ECBE7B;">my.plugin</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>calculate-grunginess}

  <span style="color: #9C91E4;">:pom-location</span> <span style="color: #7bc275;">"target/"</span>
  <span style="color: #9C91E4;">:parent</span> [<span style="color: #ECBE7B;">org.example</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>parent <span style="color: #7bc275;">"0.0.1"</span> <span style="color: #9C91E4;">:relative-path</span> <span style="color: #7bc275;">"../parent/pom.xml"</span>]
  <span style="color: #9C91E4;">:extensions</span> [[<span style="color: #ECBE7B;">org.apache.maven.wagon</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>wagon-webdav <span style="color: #7bc275;">"1.0-beta-2"</span>]
               [<span style="color: #ECBE7B;">foo</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>bar-baz <span style="color: #7bc275;">"1.0"</span>]]
  <span style="color: #9C91E4;">:pom-plugins</span> [[<span style="color: #ECBE7B;">com.theoryinpractise</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>clojure-maven-plugin <span style="color: #7bc275;">"1.3.13"</span>
                 {<span style="color: #9C91E4;">:configuration</span> [<span style="color: #9C91E4;">:sourceDirectories</span> [<span style="color: #9C91E4;">:sourceDirectory</span> <span style="color: #7bc275;">"src"</span>]]
                  <span style="color: #9C91E4;">:extensions</span> <span style="color: #7bc275;">"true"</span>
                  <span style="color: #9C91E4;">:executions</span> ([<span style="color: #9C91E4;">:execution</span> [<span style="color: #9C91E4;">:id</span> <span style="color: #7bc275;">"echodir"</span>]
                                [<span style="color: #9C91E4;">:goals</span> ([<span style="color: #9C91E4;">:goal</span> <span style="color: #7bc275;">"run"</span>])]
                                [<span style="color: #9C91E4;">:phase</span> <span style="color: #7bc275;">"verify"</span>]])}]
                [<span style="color: #ECBE7B;">org.apache.tomcat.maven</span><span style="color: #B5BABF; background-color: #1f1f1f;">/</span>tomcat7-maven-plugin <span style="color: #7bc275;">"2.1"</span>]]
  <span style="color: #9C91E4;">:scm</span> {<span style="color: #9C91E4;">:name</span> <span style="color: #7bc275;">"git"</span>
        <span style="color: #9C91E4;">:tag</span> <span style="color: #7bc275;">"098afd745bcd"</span>
        <span style="color: #9C91E4;">:url</span> <span style="color: #7bc275;">"http://127.0.0.1/git/my-project"</span>
        <span style="color: #9C91E4;">:dir</span> <span style="color: #7bc275;">".."</span>}
  <span style="color: #9C91E4;">:pom-addition</span> [<span style="color: #9C91E4;">:developers</span> [<span style="color: #9C91E4;">:developer</span> {<span style="color: #9C91E4;">:id</span> <span style="color: #7bc275;">"benbit"</span>}
                              [<span style="color: #9C91E4;">:name</span> <span style="color: #7bc275;">"Ben Bitdiddle"</span>]
                              [<span style="color: #9C91E4;">:url</span> <span style="color: #7bc275;">"http://www.example.com/benjamin"</span>]]]
  <span style="color: #9C91E4;">:install-releases?</span> <span style="color: #9C91E4;">false</span>
  <span style="color: #9C91E4;">:deploy-branches</span> [<span style="color: #7bc275;">"master"</span>]
  <span style="color: #9C91E4;">:classifiers</span> {<span style="color: #9C91E4;">:tests</span> {<span style="color: #9C91E4;">:source-paths</span> ^<span style="color: #9C91E4;">:replace</span> [<span style="color: #7bc275;">"test"</span>]}
                <span style="color: #9C91E4;">:classy</span> <span style="color: #9C91E4;">:my-profile</span>})
</pre>
</div>
<aside class="notes">
<ul>
<li>Example lein project.clj file</li>
<li>With a focus on project automation and declarative configuration, it gets out of your way and lets you focus on your code.</li>
<li>This worked for a while until I started adding more complex stuff</li>

</ul>

</aside>
</section>
<section id="slide-orgheadline4">
<h3 id="orgheadline4">Lein's Downfall</h3>
<ul>
<li class="fragment appear">Monolithic Plugins
<ul>
<li>Figwheel</li>
<li>No composability</li>

</ul></li>
<li class="fragment appear">There are <b>no</b> general solutions to specific problems</li>
<li class="fragment appear">Memory consumption
<ul>
<li>plugins fork JVM to load deps</li>

</ul></li>
<li class="fragment appear">Different implementations of plugins don't mix and match</li>
<li class="fragment appear">The need for Lein clean</li>

</ul>
<aside class="notes">
<p>
The applications we build today are highly complex. Web applications may seem simple at first, but when you get to deploying them it's actually highly complex. Things like SCSS preprocessors, minifiers, etc. Build tools just can't keep up.
</p>

<p>
Successful plugins tend to evolve into monolithic one.
</p>

<p>
Reason to use Clojure - reduces complexity. Yet the build cycle Lein introduces is inherently complex, because it tries to introduce a general solution to a specific problem. Opaque lifecycles that are hard to modify.
</p>

<p>
Each lein command starts a separate JVM.
</p>

<p>
Lein's target directory is temporary.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-orgheadline15">
<h2 id="orgheadline15">Introducing Boot</h2>

<div class="figure">
<p><img src="./static/tools.png" alt="tools.png" />
</p>
</div>
</section>
<section id="slide-orgheadline6">
<h3 id="orgheadline6">Boot in a Nutshell</h3>
<ul>
<li class="fragment appear">"Boot is not a build tool, it's build tooling"
<ul>
<li>Set of libraries to help you build your build process for your specific project</li>
<li>no concept of a build</li>

</ul></li>

</ul>
<aside class="notes">
<p>
You hear this a lot: "boot is not a build tool, it's build tooling"
</p>

</aside>
</section>
<section id="slide-orgheadline7">
<h3 id="orgheadline7">Build Tool - Back to Basics</h3>
<ul>
<li>Bootstrapping Clojure on the JVM
<ul>
<li>Immutable classpath (JAR dependencies etc.)</li>
<li>Mutable classpath (User Files)</li>
<li>Environment</li>

</ul></li>
<li>Generic Process:
<ul>
<li>\(F_{user} → BOOTSTRAP → J_{cp} + F_{cp} + F_{asset} + E\)</li>

</ul></li>

</ul>
<aside class="notes">
<p>
Show demo 0
</p>

</aside>
</section>
<section id="slide-orgheadline8">
<h3 id="orgheadline8">Boot</h3>
<p>
\(F_{user} → (T_1..T_n) → J_{cp} + F_{cp} + F_{asset} + E\)
</p>
<ul>
<li>Builds are processes, not specifications</li>
<li>Composed of small tasks that deal with relevant abstractions</li>

</ul>
<aside class="notes">
<p>
In boot, the bootstap process is essentially a composition of tasks.
</p>

</aside>
</section>
<section id="slide-orgheadline9">
<h3 id="orgheadline9">Composability ∝ Readability</h3>
<div class="org-src-container">

<pre  class="src src-clojure">(<span style="color: #00B3EF;">deftask</span> <span style="color: #46D9FF;">build</span>
  <span style="color: #7bc275;">"Builds jar for deployment"</span>
  []
  (comp
   (aot)
   (pom)
   (uber)
   (jar)
   (target)))
</pre>
</div>
</section>
<section id="slide-orgheadline10">
<h3 id="orgheadline10">Tasks Are Functions</h3>
<div class="org-src-container">

<pre  class="src src-pseudocode">f(x) = x'

a(b(c(x))) = x'

build(x) = deploy(test(compile(x))) = x'
</pre>
</div>
</section>
<section id="slide-orgheadline11">
<h3 id="orgheadline11">Tasks Are More Than Just Functions</h3>
<ul>
<li class="fragment appear">Middleware Factories</li>
<li class="fragment appear">Stateful Transducers
<ul>
<li>Tasks know nothing about the input source and sink</li>
<li>Tasks know nothing about each other</li>
<li>High reusability, composablity</li>

</ul></li>

</ul>
<aside class="notes">
<p>
Similar to Ring Middleware in concept.
</p>

</aside>
</section>
<section id="slide-orgheadline12">
<h3 id="orgheadline12">The Anatomy of a Task</h3>
<div class="org-src-container">

<pre  class="src src-clojure">(<span style="color: #00B3EF;">deftask</span> <span style="color: #46D9FF;">foo</span>
  <span style="color: #7bc275;">"Task docstring."</span>
  [...] <span style="color: #525252;">;; </span><span style="color: #525252;">Task options</span>
  (<span style="color: #00B3EF;">let</span> [...] <span style="color: #525252;">;;</span><span style="color: #525252;">Transducer-local state</span>
    (<span style="color: #00B3EF;">fn</span> <span style="color: #46D9FF;">middleware</span> [next-handler] 
      (<span style="color: #00B3EF;">fn</span> <span style="color: #46D9FF;">handler</span> [fileset]
        <span style="color: #525252;">;;</span><span style="color: #525252;">Preprocessing goes here</span>
        (<span style="color: #00B3EF;">let</span> [fileset' (... fileset)
              fileset' (commit! fileset')
              result   (next-handler fileset')]
          <span style="color: #525252;">;;</span><span style="color: #525252;">Postprocessing goes here (Side effects)</span>
          result)))))
</pre>
</div>
<aside class="notes">
<p>
deftask is a macro that is essentially a defn with additional metadata
</p>

<p>
Task-local state is wrapped in the let bindings.
</p>

<p>
The tasks return a middleware function.
</p>

<p>
The middleware expects a handler and returns a transformed one.
</p>

<p>
A handler takes a fileset and does stuff to it during the preprocessing phase. It can also perform side effects in the postprocessing phase. The reason it is side effects only is because the final artifacts are already emitted.
</p>

<p>
Show demo 1
</p>

</aside>
</section>
<section id="slide-orgheadline13">
<h3 id="orgheadline13">Filesets</h3>
<p>
\(F_{cp} + F_{asset} → F'_{cp} + F'_{asset}\)
</p>
<ul>
<li>Immutable value
<ul>
<li>automatic rewinding to initial state at start of pipeline</li>
<li>Managed shared state</li>

</ul></li>
<li>API:
<ul>
<li>Add/Remove files</li>
<li>Query (name, extension)</li>

</ul></li>
<li>Efficient</li>

</ul>
<aside class="notes">
<p>
The values passed around by tasks are termed filesets.
</p>

<p>
During bootstap process, boot copies project files into temp dirs and manages them, essentially decoupling itself from the JVM classpath. It can mutate files without affecting the JVM classpath.
</p>

<p>
Complex project.clj files typically name numerous places on disk where plugins should either emit or expect files for various purposes. Unfortunately, because the places on disk are global to the build process and are possibly shared by independent destructive processes, configuring builds this way is brittle.
</p>

<p>
Boot provides an abstraction called a fileset.
</p>

<p>
An immutable value containing references to the actual files.
</p>

<p>
Analogous to a git repo. Address by content.
</p>

<p>
Show demo 2
</p>

</aside>
</section>
<section id="slide-orgheadline14">
<h3 id="orgheadline14">Summary</h3>

<div class="figure">
<p><img src="./static/pipeline.png" alt="pipeline.png" />
</p>
</div>
<aside class="notes">
<p>
Build initial fileset. Pass it through the task pipeline.
</p>

<p>
New files are created in anonymous temporary directories that are local to the task and managed by boot. These files can be added to the fileset to obtain a new immutable fileset object, which can then be committed to disk and passed to the next handler in the pipeline.
</p>

<p>
Final artifacts emitted – The boot handler copies artifacts from the fileset into the target directory, removing any stale artifacts that may be present there from a previous build. The fileset is then returned back up the stack.
</p>

<p>
Middleware post-processing – Finally, as the fileset percolates back up through the middleware layers, each handler has an opportunity to perform side effects, if applicable.
</p>

<p>
Tasks don't modify the fileset during the post-processing phase.
</p>

</aside>
</section>
</section>
<section>
<section id="slide-orgheadline16">
<h2 id="orgheadline16">Pods</h2>
<ul>
<li>Docker for the JVM
<ul>
<li>Separate Clojure runtimes on the <b>same</b> JVM</li>

</ul></li>
<li>Solves dependency hell</li>
<li><a href="https://github.com/emezeske/lein-cljsbuild/issues/439">Tools.reader dependency not respected</a></li>

</ul>
<aside class="notes">
<p>
Pods are probably the most underused feature of boot. It's essentially like docker; it creates a isolated environment that uses the same JVM process. This is unlike Lein, which forks the main JVM process when running plugins.
</p>

<p>
Isolating dependencies that are only required during the build process and not in your Clojure application can help prevent dependency hell. Using Lein, you'll end up with issues like the above, where plugins use different versions of the same project.
</p>

<p>
Pods are not just great theoretically. Sean Corfield from World Single's recently wrote about running their tests in pods. With pods they are able to run tests against both their Clojure version and Clojure SNAPSHOT, so they won't run into surprises when upgrading.
</p>

<p>
Show demo 3
</p>

</aside>
</section>
</section>
<section>
<section id="slide-orgheadline17">
<h2 id="orgheadline17">Things you can expect</h2>
<ul>
<li class="fragment appear"><a href="https://github.com/seancorfield/boot-new">boot-new</a></li>
<li class="fragment appear">better pods: with-pod macro</li>

</ul>
</section>
</section>
<section>
<section id="slide-orgheadline18">
<h2 id="orgheadline18">How I use Boot</h2>
</section>
</section>
<section>
<section id="slide-orgheadline19">
<h2 id="orgheadline19">How to get started</h2>
<ul>
<li class="fragment appear">We have an excellent wiki!</li>
<li class="fragment appear"><a href="https://github.com/magomimmo/modern-cljs/">https://github.com/magomimmo/modern-cljs/</a></li>
<li class="fragment appear">Join us on Slack</li>

</ul>
</section>
</section>
<section>
<section id="slide-orgheadline20">
<h2 id="orgheadline20">Recap</h2>
<ul>
<li>Boot is build tooling</li>
<li>Power and expressivity of Clojure to write build process</li>
<li>Abstractions like filesets, temp-dirs and Pods</li>
<li>Familiar concepts like transducers, immutability</li>

</ul>
</section>
</section>
<section>
<section id="slide-orgheadline21">
<h2 id="orgheadline21">Announcements</h2>
<ul>
<li>For those using Slack, try our todo app! <a href="http://aa.tk.sg">http://aa.tk.sg</a></li>
<li>For those using fish, try <a href="http://fisherman.sh">Fisherman</a></li>

</ul>
</section>
</section>
<section>
<section id="slide-orgheadline22">
<h2 id="orgheadline22">Thank you!</h2>
</section>
</section>
</div>
</div>
<script src="../reveal.js/lib/js/head.min.js"></script>
<script src="../reveal.js/js/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: true,
center: false,
slideNumber: 'c',
rollingLinks: false,
keyboard: true,
overview: true,
margin: 0.00,
minScale: 1.00,
maxScale: 1.40,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'fade', // default/cube/page/concave/zoom/linear/fade/none
transitionSpeed: 'fast',
multiplex: {
    secret: '', // null if client
    id: '', // id, obtained from socket.io server
    url: '' // Location of socket.io server
},

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: '../reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: '../reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: '../reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }]
});
</script>
</body>
</html>
